<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>License Shop</title>
    <link rel="stylesheet" href="/homepage.css" th:href="@{/homepage.css}" />

    <style>
        :root {
            --blue: #2563eb;
            --blue-dark: #1d4ed8;
            --accent: #f43f5e;
            --white-90: rgba(255,255,255,0.9);
        }
        body { font-family: Arial, sans-serif; margin: 0; background: #f8f9fa; color: #111; transition: padding-top 160ms ease; }
        header { position: fixed; top: 0; left: 0; right: 0; background: var(--blue); color: white; padding: 15px 20px; display: block; transition: all 0.28s; z-index: 1200; }
        header.compact { box-shadow: 0 4px 18px rgba(16,24,40,0.12); backdrop-filter: blur(4px); }
        .header-inner { max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; gap: 20px; }
        header h1 { font-size: 20px; margin: 0; white-space: nowrap; transition: transform 0.28s, font-size 0.28s; }
        header.compact .header-inner h1 { transform: translateY(-1px); font-size: 16px; }
        .search-box { flex: 1; display: flex; justify-content: center; }
        .search-controls { display: flex; gap: 8px; align-items: center; width: 100%; max-width: 600px; }
        .search-controls input { flex: 1; padding: 10px 14px; border-radius: 8px; border: none; outline: none; }
        .search-clear { background: transparent; border: 1px solid rgba(255,255,255,0.2); color: white; padding: 8px 10px; border-radius: 6px; cursor: pointer; }
        .search-clear.hidden { display: none; }
        .actions { display: flex; gap: 8px; align-items: center; }
        .auth-login { background: transparent; color: var(--white-90); border: 1.5px solid rgba(255,255,255,0.18); padding: 8px 14px; }
        .auth-register { background: white; color: var(--blue); border: 1.5px solid rgba(0,0,0,0.06); padding: 9px 14px; }
        #cartBtn { background: rgba(255,255,255,0.12); color: white; border: 1px solid rgba(255,255,255,0.08); padding: 8px 12px; border-radius: 8px; }
        nav { background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.06); margin-top: 0; }
        .nav-inner { max-width: 1200px; margin: 0 auto; display: flex; justify-content: center; gap: 24px; padding: 10px 20px; font-weight: 600; }
        .banner { margin: 20px auto; padding: 34px; border-radius: 12px; background: linear-gradient(90deg,#4ade80,#3b82f6); color: white; text-align: center; max-width: 1200px }
        .products { padding: 20px; text-align: center; max-width: 1200px; margin: 0 auto }
        .grid-all { display: grid; grid-template-columns: repeat(4, 260px); gap: 30px; justify-content: center; align-items: start; }
        .card { background: white; border-radius: 10px; padding: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.08); transition: 0.25s; width: 100%; }
        .thumb { height: 140px; border-radius: 8px; background-size: cover; background-position: center; margin-bottom: 10px; }
        .card h3 { font-size: 15px; margin: 6px 0; height: 40px; overflow: hidden; text-align: left }
        .category { font-size: 13px; color: #666; margin-top: -4px; margin-bottom: 6px; text-align: left; }
        .price { color: #059669; font-weight: 700 }
    </style>
</head>
<body>
<header id="siteHeader">
    <div class="header-inner">
        <h1>License Shop</h1>
        <div class="search-box">
            <div class="search-controls">
                <input id="searchInput" type="text" placeholder="Tìm sản phẩm theo tên, từ khoá..." />
                <button id="clearSearch" class="search-clear hidden">X</button>
            </div>
        </div>
        <div class="actions" id="actions">
            <button class="auth-login" onclick="window.location.href='/login.html'">Đăng nhập</button>
            <button class="auth-register" onclick="window.location.href='/register.html'">Đăng ký</button>
            <button id="cartBtn">Giỏ hàng (0)</button>
        </div>
    </div>
</header>

<nav>
    <div class="nav-inner" id="mainNav">
        <span th:each="c : ${categories}" th:text="${c.name}">Tên Category</span>
    </div>
</nav>

<main id="pageContent">
    <div class="banner">
        <h2>Khuyến mãi siêu hot!</h2>
        <p>Giảm giá lên tới 80% cho các phần mềm bản quyền</p>
    </div>

    <section class="products">
        <div class="section-inner">
            <div class="content-inner">
                <h2>Tất cả sản phẩm</h2>
                <div class="sub">Danh sách đầy đủ sản phẩm</div>
                <div class="grid-all">
                    <div th:each="product : ${products}" class="card">
                        <div class="thumb" th:style="|background-image: url('${product.img_url}')|"></div>
                        <h3 th:text="${product.name}">Tên sản phẩm</h3>
                        <div class="category" th:text="${product.category != null ? product.category.name : 'Chưa có danh mục'}"></div>
                        <div class="meta">
                            <span class="price"
                                  th:text="${#lists.isEmpty(product.variants) ? 'Liên hệ' : product.variants[0].price + ' đ'}">Giá</span>
                        </div>
                        <div class="actions-row">
                            <button class="add-to-cart action-btn"
                                    type="button"
                                    th:attr="data-product-id=${product.id},
                                             data-variant-id=${#lists.isEmpty(product.variants) ? 0 : product.variants[0].id},
                                             data-price=${#lists.isEmpty(product.variants) ? 0 : product.variants[0].price}">
                                Thêm Vào Giỏ Hàng
                            </button>
                            <button class="buy action-btn" type="button">Mua ngay</button>
                        </div>
                    </div>
                </div>
                <div id="noResults" class="no-results" style="display:none;">Không tìm thấy sản phẩm nào khớp.</div>
            </div>
        </div>
    </section>
</main>
</body>
</html>
