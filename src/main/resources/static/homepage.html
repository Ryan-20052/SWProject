<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>License Shop</title>
    <style>
        :root{--blue:#2563eb;--blue-dark:#1d4ed8}
        body { font-family: Arial, sans-serif; margin: 0; background: #f8f9fa; color:#111 }
        header { background: var(--blue); color: white; padding: 15px 20px; display: flex; justify-content: center; align-items: center; }
        .header-inner { width: 1200px; display: flex; align-items: center; justify-content: space-between; gap: 20px; }
        header h1 { font-size: 20px; margin: 0; white-space: nowrap; }
        .search-box { flex: 1; display: flex; justify-content: center; }
        .search-box input { width: 100%; max-width: 600px; padding: 10px 14px; border-radius: 6px; border: none; }
        header .actions { display: flex; gap: 10px; align-items: center; }
        header button { padding: 8px 12px; border: none; border-radius: 6px; cursor: pointer; }

        nav { background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.06); }
        .nav-inner { width: 1200px; margin: 0 auto; display: flex; justify-content: center; gap: 24px; padding: 10px 20px; font-weight: 600; }

        .banner { margin: 20px auto; padding: 34px; border-radius: 12px; background: linear-gradient(90deg, #4ade80, #3b82f6); color: white; text-align: center; max-width:1200px }

        .products { padding: 20px; text-align: center; max-width:1200px; margin:0 auto }
        .section-inner { width: 100%; max-width: 1200px; margin: 0 auto; display: flex; flex-direction: column; align-items: center; }
        .content-inner { display: flex; flex-direction: column; align-items: flex-start; width: max-content; }
        .content-inner h2 { margin-bottom: 8px; text-align: left; }
        .content-inner .sub { color:#666; font-size:14px; margin-bottom:14px; text-align:left }

        .grid-featured { display: grid; grid-template-columns: repeat(4, 260px); gap: 30px; justify-content: center; align-items: start; }
        .grid-all { display: grid; grid-template-columns: repeat(4, 260px); gap: 30px; justify-content: center; align-items: start; }

        .card { background: white; border-radius: 10px; padding: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.08); transition: 0.25s; width:100%; }
        .card:hover { transform: translateY(-6px); box-shadow: 0 8px 20px rgba(0,0,0,0.12); }
        .thumb { height: 140px; border-radius: 8px; background-size: cover; background-position: center; margin-bottom: 10px; }
        .card h3 { font-size: 15px; margin: 6px 0; height: 40px; overflow: hidden; text-align:left }
        .meta { display:flex; gap:8px; align-items:center; justify-content:space-between; }
        .price { color: #059669; font-weight:700 }
        .card .buy, .card .add-to-cart { margin-top:8px; width:100%; padding:10px; background:var(--blue); color:white; border:none; border-radius:8px; cursor:pointer }
        .card .buy:hover, .card .add-to-cart:hover { background:var(--blue-dark) }
    </style>
</head>
<body>
<header>
    <div class="header-inner">
        <h1>License Shop</h1>
        <div class="search-box">
            <input type="text" placeholder="Tìm kiếm sản phẩm...">
        </div>
        <div class="actions">
            <button onclick="window.location.href='/login.html'">Đăng nhập / Đăng ký</button>
            <button id="cartBtn">Giỏ hàng (0)</button>
        </div>
    </div>
</header>

<nav>
    <div class="nav-inner">
        <span>Giải trí</span>
        <span>Làm việc</span>
        <span>Học tập</span>
        <span>Steam</span>
        <span>VPN</span>
        <span>Gift Card</span>
    </div>
</nav>

<div class="banner">
    <h2>Khuyến mãi siêu hot!</h2>
    <p>Giảm giá lên tới 80% cho các phần mềm bản quyền</p>
</div>

<section class="products">
    <div class="section-inner">
        <div class="content-inner">
            <h2>Sản phẩm nổi bật</h2>
            <div class="sub">Danh sách những sản phẩm theo xu hướng</div>
            <div class="grid-featured" id="featuredGrid"></div>
        </div>
    </div>
</section>

<section class="products">
    <div class="section-inner">
        <div class="content-inner">
            <h2>Tất cả sản phẩm</h2>
            <div class="sub">Danh sách đầy đủ sản phẩm</div>
            <div class="grid-all" id="allGrid"></div>
        </div>
    </div>
</section>

<script>
    const featuredGrid = document.getElementById("featuredGrid");
    const allGrid = document.getElementById("allGrid");
    let cart = [];

    function addToCart(product, variant){
        cart.push({product, variant, qty:1});
        updateCartBtn();
    }

    function updateCartBtn(){
        document.getElementById("cartBtn").innerText = "Giỏ hàng ("+cart.length+")";
    }

    function createCard(p){
        const div = document.createElement('div');
        div.className = 'card';

        const v = p.variants && p.variants.length > 0 ? p.variants[0] : null;

        div.innerHTML = `
          <div class="thumb" style="background:linear-gradient(90deg,#eef2ff,#e0f2fe)"></div>
          <h3>${p.name}</h3>
          <div class="meta">
              <div style="text-align:left">
                  ${v ? `<div class="price">${v.price.toLocaleString()}đ</div>` : `<div class="price">Liên hệ</div>`}
              </div>
          </div>
          <button class="buy">Mua ngay</button>
          <button class="add-to-cart">Thêm vào giỏ hàng</button>
      `;

        if(v){
            div.querySelector(".buy").addEventListener("click", ()=> {
                alert("Mua ngay: " + v.name + " - " + v.price.toLocaleString() + "đ");
            });
            div.querySelector(".add-to-cart").addEventListener("click", ()=> {
                addToCart(p, v);
            });
        }
        return div;
    }

    async function loadProducts(){
        const res = await fetch("http://localhost:8080/api/product");
        const products = await res.json();

        products.slice(0,4).forEach(p => featuredGrid.appendChild(createCard(p)));
        products.forEach(p => allGrid.appendChild(createCard(p)));
    }

    loadProducts();
</script>
</body>
</html>
